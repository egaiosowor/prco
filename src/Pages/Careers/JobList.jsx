import { useState } from 'react'

export default function JobList({jobs, setJob}){

    const [activeElement, setActiveElement] = useState(null);

    const handleClick = (job, index) => {
        setJob(job)
        setActiveElement((prevActiveElement) => {
            return prevActiveElement !== index ? index : prevActiveElement;
          });
        if(window.innerWidth < 1024){

            window.location.href = `/job/${job.id}/${(job.title).replace(/ /g, "")}`
            
        }
    }


    return(
        <main className='space-y-3 basis-[37%] lg:overflow-y-auto lg:h-screen lg:px-2' >
        {
            jobs.map((job, index) => (
                <article key={index} onClick={() => handleClick(job, index)}  key={job.id} className={`space-y-3 p-6 bg-white border border${index === activeElement ? '-[#216F66]' : ''} rounded-lg shadow cursor-pointer`} >
                    <h2 className='font-semibold text-[#171717] text-[19px]' >{job.title}</h2>
                    <div className='space-y-1' >
                        <div className='flex items-center space-x-1' >
                            <svg width="13" height="17" viewBox="0 0 13 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.8693 7.06924C12.8716 6.2329 12.7091 5.40431 12.3911 4.63078C12.0731 3.85725 11.6058 3.15392 11.016 2.56096C9.82488 1.36343 8.20678 0.688125 6.51772 0.683616C4.82865 0.679108 3.20698 1.34576 2.00944 2.53692C0.811904 3.72808 0.136601 5.34618 0.132093 7.03524C0.117135 8.99749 0.686758 10.9198 1.76837 12.5571C2.84998 14.1943 4.39459 15.4725 6.20534 16.2287C6.29791 16.2706 6.3984 16.2921 6.50001 16.2917C6.60236 16.2919 6.70356 16.2702 6.7968 16.228C8.60204 15.4741 10.1428 14.2013 11.2239 12.5708C12.305 10.9403 12.8776 9.02555 12.8693 7.06924V7.06924ZM6.50001 14.8042C5.0068 14.1468 3.74056 13.0638 2.85965 11.6905C1.97874 10.3172 1.52228 8.71474 1.54734 7.08341C1.54734 6.43302 1.67545 5.78899 1.92434 5.18811C2.17324 4.58722 2.53805 4.04124 2.99794 3.58134C3.45784 3.12145 4.00382 2.75664 4.60471 2.50774C5.20559 2.25885 5.84962 2.13074 6.50001 2.13074C7.1504 2.13074 7.79443 2.25885 8.39531 2.50774C8.9962 2.75664 9.54217 3.12145 10.0021 3.58134C10.462 4.04124 10.8268 4.58722 11.0757 5.18811C11.3246 5.78899 11.4527 6.43302 11.4527 7.08341C11.4527 7.09828 11.4527 7.11528 11.4527 7.12945C11.4699 8.75324 11.0096 10.3463 10.1291 11.7107C9.24861 13.0752 7.98666 14.1509 6.50001 14.8042V14.8042ZM6.50001 4.25008C5.93963 4.25008 5.39183 4.41625 4.92589 4.72758C4.45995 5.03891 4.0968 5.48141 3.88235 5.99914C3.6679 6.51686 3.61179 7.08655 3.72112 7.63616C3.83044 8.18578 4.10029 8.69063 4.49654 9.08688C4.89279 9.48313 5.39764 9.75298 5.94725 9.8623C6.49687 9.97163 7.06655 9.91552 7.58428 9.70107C8.102 9.48662 8.54451 9.12346 8.85584 8.65752C9.16717 8.19158 9.33334 7.64379 9.33334 7.08341C9.33334 6.33196 9.03483 5.61129 8.50348 5.07994C7.97213 4.54859 7.25146 4.25008 6.50001 4.25008ZM6.50001 8.50008C6.21982 8.50008 5.94592 8.41699 5.71295 8.26132C5.47998 8.10566 5.2984 7.88441 5.19118 7.62554C5.08396 7.36668 5.0559 7.08184 5.11056 6.80703C5.16523 6.53222 5.30015 6.2798 5.49827 6.08167C5.6964 5.88355 5.94882 5.74863 6.22363 5.69396C6.49844 5.6393 6.78328 5.66735 7.04214 5.77458C7.30101 5.8818 7.52226 6.06338 7.67792 6.29635C7.83359 6.52932 7.91668 6.80322 7.91668 7.08341C7.91668 7.45913 7.76742 7.81947 7.50174 8.08514C7.23607 8.35082 6.87573 8.50008 6.50001 8.50008Z" fill="#212121"/>
                            </svg>
                            <p className='text-[#212121]' >{job.location}</p>
                        </div>
                        <div className='flex items-center space-x-1' >
                            <p className='py-[2px] px-2 text-[#616161] text-sm font-semibold bg-[#eeeeee]' >{job.pay}</p>
                            <p className='py-[2px] px-2 text-[#616161] text-sm font-semibold bg-[#eeeeee]' >{job.employment}</p>
                        </div>
                    </div>
                </article>
            ))
        }
        </main>
    )
}